package spiders

import (
	"encoding/json"
	"go.mongodb.org/mongo-driver/bson/primitive"
	"log"
	"regexp"
	"strconv"
	"strings"

	"github.com/PuerkitoBio/goquery"
)

var (
	compileNumber = regexp.MustCompile("[0-9]")
	// all city
	//areaJson      = `
	//   [{ "Id": 340000, "Name": "安徽", "FirstCharacter": "A", "Pinyin": "anhui", "City": [{ "Id": 340100, "Name": "合肥", "FirstCharacter": "H", "Pinyin": "hefei", "OldCityId": 1 }, { "Id": 340200, "Name": "芜湖", "FirstCharacter": "W", "Pinyin": "wuhu", "OldCityId": 9 }, { "Id": 340800, "Name": "安庆", "FirstCharacter": "A", "Pinyin": "anqing", "OldCityId": 11 }, { "Id": 341200, "Name": "阜阳", "FirstCharacter": "F", "Pinyin": "fu_yang", "OldCityId": 4 }] }, { "Id": 110000, "Name": "北京", "FirstCharacter": "B", "Pinyin": "beijing", "City": [{ "Id": 110100, "Name": "北京", "FirstCharacter": "B", "Pinyin": "beijing", "OldCityId": 646 }] }, { "Id": 500000, "Name": "重庆", "FirstCharacter": "C", "Pinyin": "chongqing", "City": [{ "Id": 500100, "Name": "重庆", "FirstCharacter": "C", "Pinyin": "chongqing", "OldCityId": 648 }] }, { "Id": 350000, "Name": "福建", "FirstCharacter": "F", "Pinyin": "fujian", "City": [{ "Id": 350100, "Name": "福州", "FirstCharacter": "F", "Pinyin": "fuzhou", "OldCityId": 24 }, { "Id": 350200, "Name": "厦门", "FirstCharacter": "X", "Pinyin": "xiamen", "OldCityId": 23 }, { "Id": 350500, "Name": "泉州", "FirstCharacter": "Q", "Pinyin": "quanzhou", "OldCityId": 28 }] }, { "Id": 620000, "Name": "甘肃", "FirstCharacter": "G", "Pinyin": "gansu", "City": [{ "Id": 620100, "Name": "兰州", "FirstCharacter": "L", "Pinyin": "lanzhou", "OldCityId": 46 }] }, { "Id": 440000, "Name": "广东", "FirstCharacter": "G", "Pinyin": "guangdong", "City": [{ "Id": 440100, "Name": "广州", "FirstCharacter": "G", "Pinyin": "guangzhou", "OldCityId": 62 }, { "Id": 440200, "Name": "韶关", "FirstCharacter": "S", "Pinyin": "shaoguan", "OldCityId": 65 }, { "Id": 440300, "Name": "深圳", "FirstCharacter": "S", "Pinyin": "shenzhen", "OldCityId": 670 }, { "Id": 440400, "Name": "珠海", "FirstCharacter": "Z", "Pinyin": "zhuhai", "OldCityId": 74 }, { "Id": 440500, "Name": "汕头", "FirstCharacter": "S", "Pinyin": "shantou", "OldCityId": 69 }, { "Id": 440600, "Name": "佛山", "FirstCharacter": "F", "Pinyin": "foshan", "OldCityId": 77 }, { "Id": 440700, "Name": "江门", "FirstCharacter": "J", "Pinyin": "jiangmen", "OldCityId": 76 }, { "Id": 441300, "Name": "惠州", "FirstCharacter": "H", "Pinyin": "huizhou", "OldCityId": 72 }, { "Id": 441900, "Name": "东莞", "FirstCharacter": "D", "Pinyin": "dongguan", "OldCityId": 73 }, { "Id": 442000, "Name": "中山", "FirstCharacter": "Z", "Pinyin": "zhongshan", "OldCityId": 75 }] }, { "Id": 450000, "Name": "广西", "FirstCharacter": "G", "Pinyin": "guangxi", "City": [{ "Id": 450100, "Name": "南宁", "FirstCharacter": "N", "Pinyin": "nanning", "OldCityId": 574 }, { "Id": 450200, "Name": "柳州", "FirstCharacter": "L", "Pinyin": "liuzhou", "OldCityId": 576 }, { "Id": 450300, "Name": "桂林", "FirstCharacter": "G", "Pinyin": "guilin", "OldCityId": 575 }] }, { "Id": 520000, "Name": "贵州", "FirstCharacter": "G", "Pinyin": "guizhou", "City": [{ "Id": 520100, "Name": "贵阳", "FirstCharacter": "G", "Pinyin": "guiyang", "OldCityId": 106 }, { "Id": 520300, "Name": "遵义", "FirstCharacter": "Z", "Pinyin": "zunyi", "OldCityId": 108 }] }, { "Id": 460000, "Name": "海南", "FirstCharacter": "H", "Pinyin": "hainan", "City": [{ "Id": 460100, "Name": "海口", "FirstCharacter": "H", "Pinyin": "haikou", "OldCityId": 655 }] }, { "Id": 130000, "Name": "河北", "FirstCharacter": "H", "Pinyin": "hebei", "City": [{ "Id": 130100, "Name": "石家庄", "FirstCharacter": "S", "Pinyin": "shijiazhuang", "OldCityId": 119 }, { "Id": 130200, "Name": "唐山", "FirstCharacter": "T", "Pinyin": "tangshan", "OldCityId": 121 }, { "Id": 130300, "Name": "秦皇岛", "FirstCharacter": "Q", "Pinyin": "qinhuangdao", "OldCityId": 123 }, { "Id": 130400, "Name": "邯郸", "FirstCharacter": "H", "Pinyin": "handan", "OldCityId": 120 }, { "Id": 130500, "Name": "邢台", "FirstCharacter": "X", "Pinyin": "xingtai", "OldCityId": 124 }, { "Id": 130600, "Name": "保定", "FirstCharacter": "B", "Pinyin": "baoding", "OldCityId": 122 }, { "Id": 130700, "Name": "张家口", "FirstCharacter": "Z", "Pinyin": "zhangjiakou", "OldCityId": 125 }, { "Id": 130800, "Name": "承德", "FirstCharacter": "C", "Pinyin": "chengde", "OldCityId": 126 }, { "Id": 130900, "Name": "沧州", "FirstCharacter": "C", "Pinyin": "cangzhou", "OldCityId": 127 }, { "Id": 131000, "Name": "廊坊", "FirstCharacter": "L", "Pinyin": "langfang", "OldCityId": 128 }, { "Id": 131100, "Name": "衡水", "FirstCharacter": "H", "Pinyin": "hengshui", "OldCityId": 129 }] }, { "Id": 230000, "Name": "黑龙江", "FirstCharacter": "H", "Pinyin": "heilongjiang", "City": [{ "Id": 230100, "Name": "哈尔滨", "FirstCharacter": "H", "Pinyin": "haerbin", "OldCityId": 153 }, { "Id": 230200, "Name": "齐齐哈尔", "FirstCharacter": "Q", "Pinyin": "qiqihaer", "OldCityId": 154 }, { "Id": 230600, "Name": "大庆", "FirstCharacter": "D", "Pinyin": "daqing", "OldCityId": 156 }] }, { "Id": 410000, "Name": "河南", "FirstCharacter": "H", "Pinyin": "henan", "City": [{ "Id": 410100, "Name": "郑州", "FirstCharacter": "Z", "Pinyin": "zhengzhou", "OldCityId": 183 }, { "Id": 410200, "Name": "开封", "FirstCharacter": "K", "Pinyin": "kaifeng", "OldCityId": 184 }, { "Id": 410300, "Name": "洛阳", "FirstCharacter": "L", "Pinyin": "luoyang", "OldCityId": 185 }, { "Id": 410400, "Name": "平顶山", "FirstCharacter": "P", "Pinyin": "pingdingshan", "OldCityId": 186 }, { "Id": 410500, "Name": "安阳", "FirstCharacter": "A", "Pinyin": "anyang", "OldCityId": 187 }, { "Id": 410700, "Name": "新乡", "FirstCharacter": "X", "Pinyin": "xinxiang", "OldCityId": 189 }, { "Id": 410800, "Name": "焦作", "FirstCharacter": "J", "Pinyin": "jiaozuo", "OldCityId": 190 }, { "Id": 410900, "Name": "濮阳", "FirstCharacter": "P", "Pinyin": "puyang", "OldCityId": 191 }, { "Id": 411000, "Name": "许昌", "FirstCharacter": "X", "Pinyin": "xuchang", "OldCityId": 192 }, { "Id": 411300, "Name": "南阳", "FirstCharacter": "N", "Pinyin": "nanyang", "OldCityId": 195 }, { "Id": 411400, "Name": "商丘", "FirstCharacter": "S", "Pinyin": "shangqiu", "OldCityId": 196 }, { "Id": 411500, "Name": "信阳", "FirstCharacter": "X", "Pinyin": "xinyang", "OldCityId": 199 }, { "Id": 411600, "Name": "周口", "FirstCharacter": "Z", "Pinyin": "zhoukou", "OldCityId": 197 }, { "Id": 411700, "Name": "驻马店", "FirstCharacter": "Z", "Pinyin": "zhumadian", "OldCityId": 198 }] }, { "Id": 420000, "Name": "湖北", "FirstCharacter": "H", "Pinyin": "hubei", "City": [{ "Id": 420100, "Name": "武汉", "FirstCharacter": "W", "Pinyin": "wuhan", "OldCityId": 221 }, { "Id": 420300, "Name": "十堰", "FirstCharacter": "S", "Pinyin": "shiyan", "OldCityId": 222 }, { "Id": 420500, "Name": "宜昌", "FirstCharacter": "Y", "Pinyin": "yichang", "OldCityId": 231 }, { "Id": 420600, "Name": "襄阳", "FirstCharacter": "X", "Pinyin": "xiangyang", "OldCityId": 223 }] }, { "Id": 430000, "Name": "湖南", "FirstCharacter": "H", "Pinyin": "hunan", "City": [{ "Id": 430100, "Name": "长沙", "FirstCharacter": "C", "Pinyin": "changsha", "OldCityId": 257 }, { "Id": 430200, "Name": "株洲", "FirstCharacter": "Z", "Pinyin": "zhuzhou", "OldCityId": 262 }, { "Id": 430300, "Name": "湘潭", "FirstCharacter": "X", "Pinyin": "xiangtan", "OldCityId": 263 }, { "Id": 430400, "Name": "衡阳", "FirstCharacter": "H", "Pinyin": "hengyang", "OldCityId": 264 }] }, { "Id": 220000, "Name": "吉林", "FirstCharacter": "J", "Pinyin": "jilin", "City": [{ "Id": 220100, "Name": "长春", "FirstCharacter": "C", "Pinyin": "changchun", "OldCityId": 286 }, { "Id": 220200, "Name": "吉林", "FirstCharacter": "J", "Pinyin": "jilinshi", "OldCityId": 287 }] }, { "Id": 320000, "Name": "江苏", "FirstCharacter": "J", "Pinyin": "jiangsu", "City": [{ "Id": 320100, "Name": "南京", "FirstCharacter": "N", "Pinyin": "nanjing", "OldCityId": 335 }, { "Id": 320200, "Name": "无锡", "FirstCharacter": "W", "Pinyin": "wuxi", "OldCityId": 346 }, { "Id": 320300, "Name": "徐州", "FirstCharacter": "X", "Pinyin": "xuzhou", "OldCityId": 336 }, { "Id": 320400, "Name": "常州", "FirstCharacter": "C", "Pinyin": "changzhou", "OldCityId": 345 }, { "Id": 320500, "Name": "苏州", "FirstCharacter": "S", "Pinyin": "suzhou", "OldCityId": 347 }, { "Id": 320600, "Name": "南通", "FirstCharacter": "N", "Pinyin": "nantong", "OldCityId": 343 }, { "Id": 320700, "Name": "连云港", "FirstCharacter": "L", "Pinyin": "lianyungang", "OldCityId": 337 }, { "Id": 320800, "Name": "淮安", "FirstCharacter": "H", "Pinyin": "huaian", "OldCityId": 339 }, { "Id": 320900, "Name": "盐城", "FirstCharacter": "Y", "Pinyin": "yancheng", "OldCityId": 340 }, { "Id": 321000, "Name": "扬州", "FirstCharacter": "Y", "Pinyin": "yangzhou", "OldCityId": 341 }, { "Id": 321100, "Name": "镇江", "FirstCharacter": "Z", "Pinyin": "zhenjiang", "OldCityId": 344 }, { "Id": 321200, "Name": "泰州", "FirstCharacter": "T", "Pinyin": "tai_zhou", "OldCityId": 342 }, { "Id": 321300, "Name": "宿迁", "FirstCharacter": "S", "Pinyin": "suqian", "OldCityId": 338 }] }, { "Id": 360000, "Name": "江西", "FirstCharacter": "J", "Pinyin": "jiangxi", "City": [{ "Id": 360100, "Name": "南昌", "FirstCharacter": "N", "Pinyin": "nanchang", "OldCityId": 314 }, { "Id": 360400, "Name": "九江", "FirstCharacter": "J", "Pinyin": "jiujiang", "OldCityId": 315 }, { "Id": 360700, "Name": "赣州", "FirstCharacter": "G", "Pinyin": "ganzhou", "OldCityId": 320 }, { "Id": 361100, "Name": "上饶", "FirstCharacter": "S", "Pinyin": "shangrao", "OldCityId": 321 }] }, { "Id": 210000, "Name": "辽宁", "FirstCharacter": "L", "Pinyin": "liaoning", "City": [{ "Id": 210100, "Name": "沈阳", "FirstCharacter": "S", "Pinyin": "shenyang", "OldCityId": 375 }, { "Id": 210200, "Name": "大连", "FirstCharacter": "D", "Pinyin": "dalian", "OldCityId": 376 }, { "Id": 210300, "Name": "鞍山", "FirstCharacter": "A", "Pinyin": "anshan", "OldCityId": 383 }, { "Id": 210800, "Name": "营口", "FirstCharacter": "Y", "Pinyin": "yingkou", "OldCityId": 385 }] }, { "Id": 150000, "Name": "内蒙古", "FirstCharacter": "N", "Pinyin": "namenggu", "City": [{ "Id": 150100, "Name": "呼和浩特", "FirstCharacter": "H", "Pinyin": "huhehaote", "OldCityId": 595 }, { "Id": 150200, "Name": "包头", "FirstCharacter": "B", "Pinyin": "baotou", "OldCityId": 596 }, { "Id": 150400, "Name": "赤峰", "FirstCharacter": "C", "Pinyin": "chifeng", "OldCityId": 598 }, { "Id": 150500, "Name": "通辽", "FirstCharacter": "T", "Pinyin": "tongliao", "OldCityId": 600 }, { "Id": 150600, "Name": "鄂尔多斯", "FirstCharacter": "E", "Pinyin": "eerduosi", "OldCityId": 602 }] }, { "Id": 640000, "Name": "宁夏", "FirstCharacter": "N", "Pinyin": "ningxia", "City": [{ "Id": 640100, "Name": "银川", "FirstCharacter": "Y", "Pinyin": "yinchuan", "OldCityId": 615 }] }, { "Id": 630000, "Name": "青海", "FirstCharacter": "Q", "Pinyin": "qinghai", "City": [{ "Id": 630100, "Name": "西宁", "FirstCharacter": "X", "Pinyin": "xining", "OldCityId": 571 }] }, { "Id": 610000, "Name": "陕西", "FirstCharacter": "S", "Pinyin": "shan_xi", "City": [{ "Id": 610100, "Name": "西安", "FirstCharacter": "X", "Pinyin": "xian", "OldCityId": 454 }, { "Id": 610800, "Name": "榆林", "FirstCharacter": "Y", "Pinyin": "yulin", "OldCityId": 461 }] }, { "Id": 370000, "Name": "山东", "FirstCharacter": "S", "Pinyin": "shandong", "City": [{ "Id": 370100, "Name": "济南", "FirstCharacter": "J", "Pinyin": "jinan", "OldCityId": 406 }, { "Id": 370200, "Name": "青岛", "FirstCharacter": "Q", "Pinyin": "qingdao", "OldCityId": 407 }, { "Id": 370300, "Name": "淄博", "FirstCharacter": "Z", "Pinyin": "zibo", "OldCityId": 411 }, { "Id": 370400, "Name": "枣庄", "FirstCharacter": "Z", "Pinyin": "zaozhuang", "OldCityId": 417 }, { "Id": 370500, "Name": "东营", "FirstCharacter": "D", "Pinyin": "dongying", "OldCityId": 410 }, { "Id": 370600, "Name": "烟台", "FirstCharacter": "Y", "Pinyin": "yantai", "OldCityId": 413 }, { "Id": 370700, "Name": "潍坊", "FirstCharacter": "W", "Pinyin": "weifang", "OldCityId": 412 }, { "Id": 370800, "Name": "济宁", "FirstCharacter": "J", "Pinyin": "jining", "OldCityId": 418 }, { "Id": 370900, "Name": "泰安", "FirstCharacter": "T", "Pinyin": "taian", "OldCityId": 419 }, { "Id": 371000, "Name": "威海", "FirstCharacter": "W", "Pinyin": "weihai", "OldCityId": 414 }, { "Id": 371100, "Name": "日照", "FirstCharacter": "R", "Pinyin": "rizhao", "OldCityId": 415 }, { "Id": 371200, "Name": "莱芜", "FirstCharacter": "L", "Pinyin": "laiwu", "OldCityId": 420 }, { "Id": 371300, "Name": "临沂", "FirstCharacter": "L", "Pinyin": "linyi", "OldCityId": 416 }, { "Id": 371400, "Name": "德州", "FirstCharacter": "D", "Pinyin": "dezhou", "OldCityId": 409 }, { "Id": 371500, "Name": "聊城", "FirstCharacter": "L", "Pinyin": "liaocheng", "OldCityId": 408 }, { "Id": 371600, "Name": "滨州", "FirstCharacter": "B", "Pinyin": "binzhou", "OldCityId": 421 }, { "Id": 371700, "Name": "菏泽", "FirstCharacter": "H", "Pinyin": "heze", "OldCityId": 422 }] }, { "Id": 310000, "Name": "上海", "FirstCharacter": "S", "Pinyin": "shanghai", "City": [{ "Id": 310100, "Name": "上海", "FirstCharacter": "S", "Pinyin": "shanghai", "OldCityId": 649 }] }, { "Id": 140000, "Name": "山西", "FirstCharacter": "S", "Pinyin": "shanxi", "City": [{ "Id": 140100, "Name": "太原", "FirstCharacter": "T", "Pinyin": "taiyuan", "OldCityId": 467 }, { "Id": 140200, "Name": "大同", "FirstCharacter": "D", "Pinyin": "datong", "OldCityId": 468 }, { "Id": 140400, "Name": "长治", "FirstCharacter": "C", "Pinyin": "changzhi", "OldCityId": 471 }, { "Id": 140500, "Name": "晋城", "FirstCharacter": "J", "Pinyin": "jincheng", "OldCityId": 472 }, { "Id": 140700, "Name": "晋中", "FirstCharacter": "J", "Pinyin": "jinzhong", "OldCityId": 475 }, { "Id": 140800, "Name": "运城", "FirstCharacter": "Y", "Pinyin": "yuncheng", "OldCityId": 477 }, { "Id": 141000, "Name": "临汾", "FirstCharacter": "L", "Pinyin": "linfen", "OldCityId": 476 }] }, { "Id": 510000, "Name": "四川", "FirstCharacter": "S", "Pinyin": "sichuan", "City": [{ "Id": 510100, "Name": "成都", "FirstCharacter": "C", "Pinyin": "chengdu", "OldCityId": 489 }, { "Id": 510600, "Name": "德阳", "FirstCharacter": "D", "Pinyin": "deyang", "OldCityId": 492 }, { "Id": 510700, "Name": "绵阳", "FirstCharacter": "M", "Pinyin": "mianyang", "OldCityId": 491 }, { "Id": 511300, "Name": "南充", "FirstCharacter": "N", "Pinyin": "nanchong", "OldCityId": 493 }] }, { "Id": 120000, "Name": "天津", "FirstCharacter": "T", "Pinyin": "tianjin", "City": [{ "Id": 120100, "Name": "天津", "FirstCharacter": "T", "Pinyin": "tianjin", "OldCityId": 647 }] }, { "Id": 650000, "Name": "新疆", "FirstCharacter": "X", "Pinyin": "xinjiang", "City": [{ "Id": 650100, "Name": "乌鲁木齐", "FirstCharacter": "W", "Pinyin": "wulumuqi", "OldCityId": 624 }] }, { "Id": 530000, "Name": "云南", "FirstCharacter": "Y", "Pinyin": "yunnan", "City": [{ "Id": 530100, "Name": "昆明", "FirstCharacter": "K", "Pinyin": "kunming", "OldCityId": 521 }, { "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }] }, { "Id": 330000, "Name": "浙江", "FirstCharacter": "Z", "Pinyin": "zhejiang", "City": [{ "Id": 330100, "Name": "杭州", "FirstCharacter": "H", "Pinyin": "hangzhou", "OldCityId": 538 }, { "Id": 330200, "Name": "宁波", "FirstCharacter": "N", "Pinyin": "ningbo", "OldCityId": 539 }, { "Id": 330300, "Name": "温州", "FirstCharacter": "W", "Pinyin": "wenzhou", "OldCityId": 547 }, { "Id": 330400, "Name": "嘉兴", "FirstCharacter": "J", "Pinyin": "jiaxing", "OldCityId": 541 }, { "Id": 330500, "Name": "湖州", "FirstCharacter": "H", "Pinyin": "huzhou", "OldCityId": 540 }, { "Id": 330600, "Name": "绍兴", "FirstCharacter": "S", "Pinyin": "shaoxing", "OldCityId": 543 }, { "Id": 330700, "Name": "金华", "FirstCharacter": "J", "Pinyin": "jinhua", "OldCityId": 545 }, { "Id": 330800, "Name": "衢州", "FirstCharacter": "Q", "Pinyin": "quzhou", "OldCityId": 544 }, { "Id": 331000, "Name": "台州", "FirstCharacter": "T", "Pinyin": "taizhou", "OldCityId": 546 }] }]
	//`

	// 云南
	areaJson = `
       [{ "Id": 530000, "Name": "云南", "FirstCharacter": "Y", "Pinyin": "yunnan", "City": [
{ "Id": 530100, "Name": "昆明", "FirstCharacter": "K", "Pinyin": "kunming", "OldCityId": 521 },
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
{ "Id": 530300, "Name": "曲靖", "FirstCharacter": "Q", "Pinyin": "qujing", "OldCityId": 522 }
] }]
    `

	//{"name":"云南","pinyin":"yunnan","id":530000},
	//{"name":"昆明","pinyin":"kunming","id":530100,"citysite":1},
	//{"name":"曲靖","pinyin":"qujing","id":530300,"citysite":1},
	//{"name":"保山","pinyin":"baoshan","id":530500,"citysite":0},
	//{"name":"楚雄","pinyin":"chuxiong","id":532300,"citysite":0},
	//{"name":"大理","pinyin":"dali","id":532900,"citysite":0},
	//{"name":"德宏","pinyin":"dehong","id":533100,"citysite":0},
	//{"name":"迪庆","pinyin":"diqing","id":533400,"citysite":0},
	//{"name":"红河","pinyin":"honghe","id":532500,"citysite":0},
	//{"name":"丽江","pinyin":"lijiang","id":530700,"citysite":0},
	//{"name":"临沧","pinyin":"lincang","id":530900,"citysite":0},
	//{"name":"怒江","pinyin":"nujiang","id":533300,"citysite":0},
	//{"name":"普洱","pinyin":"puer","id":530800,"citysite":0},
	//{"name":"文山","pinyin":"wenshan","id":532600,"citysite":0},
	//{"name":"西双版纳","pinyin":"xishuangbanna","id":532800,"citysite":0},
	//{"name":"玉溪","pinyin":"yuxi","id":530400,"citysite":0},
	//{"name":"昭通","pinyin":"zhaotong","id":530600,"citysite":0}

	//areaJson      = `
	//    [{ "Id": 340000, "Name": "安徽", "FirstCharacter": "A", "Pinyin": "anhui", "City": [{ "Id": 340100, "Name": "合肥", "FirstCharacter": "H", "Pinyin": "hefei", "OldCityId": 1 }]}]
	//	`

	cityArray = `
		[{"name":"安徽","pinyin":"anhui","id":340000},{"name":"合肥","pinyin":"hefei","id":340100,"citysite":1},{"name":"芜湖","pinyin":"wuhu","id":340200,"citysite":1},{"name":"安庆","pinyin":"anqing","id":340800,"citysite":1},{"name":"阜阳","pinyin":"fu_yang","id":341200,"citysite":1},{"name":"亳州","pinyin":"bozhou","id":341600,"citysite":0},{"name":"蚌埠","pinyin":"bangbu","id":340300,"citysite":0},{"name":"池州","pinyin":"chizhou","id":341700,"citysite":0},{"name":"滁州","pinyin":"chuzhou","id":341100,"citysite":0},{"name":"黄山","pinyin":"huangshan","id":341000,"citysite":0},{"name":"淮北","pinyin":"huaibei","id":340600,"citysite":0},{"name":"淮南","pinyin":"huainan","id":340400,"citysite":0},{"name":"六安","pinyin":"liuan","id":341500,"citysite":0},{"name":"马鞍山","pinyin":"maanshan","id":340500,"citysite":0},{"name":"宿州","pinyin":"su_zhou","id":341300,"citysite":0},{"name":"铜陵","pinyin":"tongling","id":340700,"citysite":0},{"name":"宣城","pinyin":"xuancheng","id":341800,"citysite":0},{"name":"北京","pinyin":"beijing","id":110000},{"name":"重庆","pinyin":"chongqing","id":500000},{"name":"福建","pinyin":"fujian","id":350000},{"name":"福州","pinyin":"fuzhou","id":350100,"citysite":1},{"name":"厦门","pinyin":"xiamen","id":350200,"citysite":1},{"name":"泉州","pinyin":"quanzhou","id":350500,"citysite":1},{"name":"龙岩","pinyin":"longyan","id":350800,"citysite":0},{"name":"宁德","pinyin":"ningde","id":350900,"citysite":0},{"name":"南平","pinyin":"nanping","id":350700,"citysite":0},{"name":"莆田","pinyin":"putian","id":350300,"citysite":0},{"name":"三明","pinyin":"sanming","id":350400,"citysite":0},{"name":"漳州","pinyin":"zhangzhou","id":350600,"citysite":0},{"name":"广东","pinyin":"guangdong","id":440000},{"name":"广州","pinyin":"guangzhou","id":440100,"citysite":1},{"name":"韶关","pinyin":"shaoguan","id":440200,"citysite":1},{"name":"深圳","pinyin":"shenzhen","id":440300,"citysite":1},{"name":"珠海","pinyin":"zhuhai","id":440400,"citysite":1},{"name":"汕头","pinyin":"shantou","id":440500,"citysite":1},{"name":"佛山","pinyin":"foshan","id":440600,"citysite":1},{"name":"江门","pinyin":"jiangmen","id":440700,"citysite":1},{"name":"惠州","pinyin":"huizhou","id":441300,"citysite":1},{"name":"东莞","pinyin":"dongguan","id":441900,"citysite":1},{"name":"中山","pinyin":"zhongshan","id":442000,"citysite":1},{"name":"潮州","pinyin":"chaozhou","id":445100,"citysite":0},{"name":"河源","pinyin":"heyuan","id":441600,"citysite":0},{"name":"揭阳","pinyin":"jieyang","id":445200,"citysite":0},{"name":"梅州","pinyin":"meizhou","id":441400,"citysite":0},{"name":"茂名","pinyin":"maoming","id":440900,"citysite":0},{"name":"清远","pinyin":"qingyuan","id":441800,"citysite":0},{"name":"汕尾","pinyin":"shanwei","id":441500,"citysite":0},{"name":"云浮","pinyin":"yunfu","id":445300,"citysite":0},{"name":"阳江","pinyin":"yangjiang","id":441700,"citysite":0},{"name":"湛江","pinyin":"zhanjiang","id":440800,"citysite":0},{"name":"肇庆","pinyin":"zhaoqing","id":441200,"citysite":0},{"name":"广西","pinyin":"guangxi","id":450000},{"name":"南宁","pinyin":"nanning","id":450100,"citysite":1},{"name":"柳州","pinyin":"liuzhou","id":450200,"citysite":1},{"name":"桂林","pinyin":"guilin","id":450300,"citysite":1},{"name":"北海","pinyin":"beihai","id":450500,"citysite":0},{"name":"百色","pinyin":"baise","id":451000,"citysite":0},{"name":"崇左","pinyin":"chongzuo","id":451400,"citysite":0},{"name":"防城港","pinyin":"fangchenggang","id":450600,"citysite":0},{"name":"贵港","pinyin":"guigang","id":450800,"citysite":0},{"name":"贺州","pinyin":"hezhou","id":451100,"citysite":0},{"name":"河池","pinyin":"hechi","id":451200,"citysite":0},{"name":"来宾","pinyin":"laibin","id":451300,"citysite":0},{"name":"钦州","pinyin":"qinzhou","id":450700,"citysite":0},{"name":"梧州","pinyin":"wuzhou","id":450400,"citysite":0},{"name":"玉林","pinyin":"yu_lin","id":450900,"citysite":0},{"name":"贵州","pinyin":"guizhou","id":520000},{"name":"贵阳","pinyin":"guiyang","id":520100,"citysite":1},{"name":"遵义","pinyin":"zunyi","id":520300,"citysite":1},{"name":"安顺","pinyin":"anshun","id":520400,"citysite":0},{"name":"毕节","pinyin":"bijie","id":520500,"citysite":0},{"name":"六盘水","pinyin":"liupanshui","id":520200,"citysite":0},{"name":"黔西南","pinyin":"qianxinan","id":522300,"citysite":0},{"name":"黔东南","pinyin":"qiandongnan","id":522600,"citysite":0},{"name":"黔南","pinyin":"qiannan","id":522700,"citysite":0},{"name":"铜仁","pinyin":"tongren","id":520600,"citysite":0},{"name":"甘肃","pinyin":"gansu","id":620000},{"name":"兰州","pinyin":"lanzhou","id":620100,"citysite":1},{"name":"白银","pinyin":"baiyin","id":620400,"citysite":0},{"name":"定西","pinyin":"dingxi","id":621100,"citysite":0},{"name":"甘南","pinyin":"gannan","id":623000,"citysite":0},{"name":"酒泉","pinyin":"jiuquan","id":620900,"citysite":0},{"name":"嘉峪关","pinyin":"jiayuguan","id":620200,"citysite":0},{"name":"金昌","pinyin":"jinchang","id":620300,"citysite":0},{"name":"陇南","pinyin":"longnan","id":621200,"citysite":0},{"name":"临夏","pinyin":"linxia","id":622900,"citysite":0},{"name":"平凉","pinyin":"pingliang","id":620800,"citysite":0},{"name":"庆阳","pinyin":"qingyang","id":621000,"citysite":0},{"name":"天水","pinyin":"tianshui","id":620500,"citysite":0},{"name":"武威","pinyin":"wuwei","id":620600,"citysite":0},{"name":"张掖","pinyin":"zhangye","id":620700,"citysite":0},{"name":"海南","pinyin":"hainan","id":460000},{"name":"海口","pinyin":"haikou","id":460100,"citysite":1},{"name":"白沙","pinyin":"baisha","id":469025,"citysite":0},{"name":"保亭","pinyin":"baoting","id":469029,"citysite":0},{"name":"昌江","pinyin":"changjiang","id":469026,"citysite":0},{"name":"澄迈","pinyin":"chengmai","id":469023,"citysite":0},{"name":"东方","pinyin":"dongfang","id":469007,"citysite":0},{"name":"定安","pinyin":"dingan","id":469021,"citysite":0},{"name":"儋州","pinyin":"danzhou","id":460400,"citysite":0},{"name":"临高","pinyin":"lingao","id":469024,"citysite":0},{"name":"乐东","pinyin":"ledong","id":469027,"citysite":0},{"name":"陵水","pinyin":"lingshui","id":469028,"citysite":0},{"name":"琼中","pinyin":"qiongzhong","id":469030,"citysite":0},{"name":"琼海","pinyin":"qionghai","id":469002,"citysite":0},{"name":"三亚","pinyin":"sanya","id":460200,"citysite":0},{"name":"三沙","pinyin":"sansha","id":460300,"citysite":0},{"name":"屯昌","pinyin":"tunchang","id":469022,"citysite":0},{"name":"文昌","pinyin":"wenchang","id":469005,"citysite":0},{"name":"万宁","pinyin":"wanning","id":469006,"citysite":0},{"name":"五指山","pinyin":"wuzhishan","id":469001,"citysite":0},{"name":"河南","pinyin":"henan","id":410000},{"name":"郑州","pinyin":"zhengzhou","id":410100,"citysite":1},{"name":"开封","pinyin":"kaifeng","id":410200,"citysite":1},{"name":"洛阳","pinyin":"luoyang","id":410300,"citysite":1},{"name":"平顶山","pinyin":"pingdingshan","id":410400,"citysite":1},{"name":"安阳","pinyin":"anyang","id":410500,"citysite":1},{"name":"新乡","pinyin":"xinxiang","id":410700,"citysite":1},{"name":"焦作","pinyin":"jiaozuo","id":410800,"citysite":1},{"name":"濮阳","pinyin":"puyang","id":410900,"citysite":1},{"name":"许昌","pinyin":"xuchang","id":411000,"citysite":1},{"name":"南阳","pinyin":"nanyang","id":411300,"citysite":1},{"name":"商丘","pinyin":"shangqiu","id":411400,"citysite":1},{"name":"信阳","pinyin":"xinyang","id":411500,"citysite":1},{"name":"周口","pinyin":"zhoukou","id":411600,"citysite":1},{"name":"驻马店","pinyin":"zhumadian","id":411700,"citysite":1},{"name":"鹤壁","pinyin":"hebi","id":410600,"citysite":0},{"name":"济源","pinyin":"jiyuan","id":419001,"citysite":0},{"name":"漯河","pinyin":"luohe","id":411100,"citysite":0},{"name":"三门峡","pinyin":"sanmenxia","id":411200,"citysite":0},{"name":"湖北","pinyin":"hubei","id":420000},{"name":"武汉","pinyin":"wuhan","id":420100,"citysite":1},{"name":"十堰","pinyin":"shiyan","id":420300,"citysite":1},{"name":"宜昌","pinyin":"yichang","id":420500,"citysite":1},{"name":"襄阳","pinyin":"xiangyang","id":420600,"citysite":1},{"name":"鄂州","pinyin":"ezhou","id":420700,"citysite":0},{"name":"恩施","pinyin":"enshi","id":422800,"citysite":0},{"name":"黄冈","pinyin":"huanggang","id":421100,"citysite":0},{"name":"黄石","pinyin":"huangshi","id":420200,"citysite":0},{"name":"荆门","pinyin":"jingmen","id":420800,"citysite":0},{"name":"荆州","pinyin":"jingzhou","id":421000,"citysite":0},{"name":"潜江","pinyin":"qianjiang","id":429005,"citysite":0},{"name":"神农架","pinyin":"shennongjia","id":429021,"citysite":0},{"name":"随州","pinyin":"suizhou","id":421300,"citysite":0},{"name":"天门","pinyin":"tianmen","id":429006,"citysite":0},{"name":"孝感","pinyin":"xiaogan","id":420900,"citysite":0},{"name":"咸宁","pinyin":"xianning","id":421200,"citysite":0},{"name":"仙桃","pinyin":"xiantao","id":429004,"citysite":0},{"name":"湖南","pinyin":"hunan","id":430000},{"name":"长沙","pinyin":"changsha","id":430100,"citysite":1},{"name":"株洲","pinyin":"zhuzhou","id":430200,"citysite":1},{"name":"湘潭","pinyin":"xiangtan","id":430300,"citysite":1},{"name":"衡阳","pinyin":"hengyang","id":430400,"citysite":1},{"name":"常德","pinyin":"changde","id":430700,"citysite":0},{"name":"郴州","pinyin":"chenzhou","id":431000,"citysite":0},{"name":"怀化","pinyin":"huaihua","id":431200,"citysite":0},{"name":"娄底","pinyin":"loudi","id":431300,"citysite":0},{"name":"邵阳","pinyin":"shaoyang","id":430500,"citysite":0},{"name":"湘西","pinyin":"xiangxi","id":433100,"citysite":0},{"name":"永州","pinyin":"yongzhou","id":431100,"citysite":0},{"name":"岳阳","pinyin":"yueyang","id":430600,"citysite":0},{"name":"益阳","pinyin":"yiyang","id":430900,"citysite":0},{"name":"张家界","pinyin":"zhangjiajie","id":430800,"citysite":0},{"name":"河北","pinyin":"hebei","id":130000},{"name":"石家庄","pinyin":"shijiazhuang","id":130100,"citysite":1},{"name":"唐山","pinyin":"tangshan","id":130200,"citysite":1},{"name":"秦皇岛","pinyin":"qinhuangdao","id":130300,"citysite":1},{"name":"邯郸","pinyin":"handan","id":130400,"citysite":1},{"name":"邢台","pinyin":"xingtai","id":130500,"citysite":1},{"name":"保定","pinyin":"baoding","id":130600,"citysite":1},{"name":"张家口","pinyin":"zhangjiakou","id":130700,"citysite":1},{"name":"承德","pinyin":"chengde","id":130800,"citysite":1},{"name":"沧州","pinyin":"cangzhou","id":130900,"citysite":1},{"name":"廊坊","pinyin":"langfang","id":131000,"citysite":1},{"name":"衡水","pinyin":"hengshui","id":131100,"citysite":1},{"name":"黑龙江","pinyin":"heilongjiang","id":230000},{"name":"哈尔滨","pinyin":"haerbin","id":230100,"citysite":1},{"name":"齐齐哈尔","pinyin":"qiqihaer","id":230200,"citysite":1},{"name":"大庆","pinyin":"daqing","id":230600,"citysite":1},{"name":"大兴安岭","pinyin":"daxinganling","id":232700,"citysite":0},{"name":"黑河","pinyin":"heihe","id":231100,"citysite":0},{"name":"鹤岗","pinyin":"hegang","id":230400,"citysite":0},{"name":"鸡西","pinyin":"jixi","id":230300,"citysite":0},{"name":"佳木斯","pinyin":"jiamusi","id":230800,"citysite":0},{"name":"牡丹江","pinyin":"mudanjiang","id":231000,"citysite":0},{"name":"七台河","pinyin":"qitaihe","id":230900,"citysite":0},{"name":"双鸭山","pinyin":"shuangyashan","id":230500,"citysite":0},{"name":"绥化","pinyin":"suihua","id":231200,"citysite":0},{"name":"伊春","pinyin":"yichun","id":230700,"citysite":0},{"name":"江苏","pinyin":"jiangsu","id":320000},{"name":"南京","pinyin":"nanjing","id":320100,"citysite":1},{"name":"无锡","pinyin":"wuxi","id":320200,"citysite":1},{"name":"徐州","pinyin":"xuzhou","id":320300,"citysite":1},{"name":"常州","pinyin":"changzhou","id":320400,"citysite":1},{"name":"苏州","pinyin":"suzhou","id":320500,"citysite":1},{"name":"南通","pinyin":"nantong","id":320600,"citysite":1},{"name":"连云港","pinyin":"lianyungang","id":320700,"citysite":1},{"name":"淮安","pinyin":"huaian","id":320800,"citysite":1},{"name":"盐城","pinyin":"yancheng","id":320900,"citysite":1},{"name":"扬州","pinyin":"yangzhou","id":321000,"citysite":1},{"name":"镇江","pinyin":"zhenjiang","id":321100,"citysite":1},{"name":"泰州","pinyin":"tai_zhou","id":321200,"citysite":1},{"name":"宿迁","pinyin":"suqian","id":321300,"citysite":1},{"name":"江西","pinyin":"jiangxi","id":360000},{"name":"南昌","pinyin":"nanchang","id":360100,"citysite":1},{"name":"九江","pinyin":"jiujiang","id":360400,"citysite":1},{"name":"赣州","pinyin":"ganzhou","id":360700,"citysite":1},{"name":"上饶","pinyin":"shangrao","id":361100,"citysite":1},{"name":"抚州","pinyin":"fu_zhou","id":361000,"citysite":0},{"name":"吉安","pinyin":"jian","id":360800,"citysite":0},{"name":"景德镇","pinyin":"jingdezhen","id":360200,"citysite":0},{"name":"萍乡","pinyin":"ping_xiang","id":360300,"citysite":0},{"name":"新余","pinyin":"xinyu","id":360500,"citysite":0},{"name":"鹰潭","pinyin":"yingtan","id":360600,"citysite":0},{"name":"宜春","pinyin":"yi_chun","id":360900,"citysite":0},{"name":"吉林","pinyin":"jilin","id":220000},{"name":"长春","pinyin":"changchun","id":220100,"citysite":1},{"name":"吉林","pinyin":"jilinshi","id":220200,"citysite":1},{"name":"白山","pinyin":"baishan","id":220600,"citysite":0},{"name":"白城","pinyin":"baicheng","id":220800,"citysite":0},{"name":"辽源","pinyin":"liaoyuan","id":220400,"citysite":0},{"name":"松原","pinyin":"songyuan","id":220700,"citysite":0},{"name":"四平","pinyin":"siping","id":220300,"citysite":0},{"name":"通化","pinyin":"tonghua","id":220500,"citysite":0},{"name":"延边","pinyin":"yanbian","id":222400,"citysite":0},{"name":"辽宁","pinyin":"liaoning","id":210000},{"name":"沈阳","pinyin":"shenyang","id":210100,"citysite":1},{"name":"大连","pinyin":"dalian","id":210200,"citysite":1},{"name":"鞍山","pinyin":"anshan","id":210300,"citysite":1},{"name":"营口","pinyin":"yingkou","id":210800,"citysite":1},{"name":"本溪","pinyin":"benxi","id":210500,"citysite":0},{"name":"朝阳","pinyin":"chaoyang","id":211300,"citysite":0},{"name":"丹东","pinyin":"dandong","id":210600,"citysite":0},{"name":"抚顺","pinyin":"fushun","id":210400,"citysite":0},{"name":"阜新","pinyin":"fuxin","id":210900,"citysite":0},{"name":"葫芦岛","pinyin":"huludao","id":211400,"citysite":0},{"name":"锦州","pinyin":"jinzhou","id":210700,"citysite":0},{"name":"辽阳","pinyin":"liaoyang","id":211000,"citysite":0},{"name":"盘锦","pinyin":"panjin","id":211100,"citysite":0},{"name":"铁岭","pinyin":"tieling","id":211200,"citysite":0},{"name":"内蒙古","pinyin":"namenggu","id":150000},{"name":"呼和浩特","pinyin":"huhehaote","id":150100,"citysite":1},{"name":"包头","pinyin":"baotou","id":150200,"citysite":1},{"name":"赤峰","pinyin":"chifeng","id":150400,"citysite":1},{"name":"通辽","pinyin":"tongliao","id":150500,"citysite":1},{"name":"鄂尔多斯","pinyin":"eerduosi","id":150600,"citysite":1},{"name":"阿拉善盟","pinyin":"alashanmeng","id":152900,"citysite":0},{"name":"巴彦淖尔","pinyin":"bayannaoer","id":150800,"citysite":0},{"name":"呼伦贝尔","pinyin":"hulunbeier","id":150700,"citysite":0},{"name":"乌兰察布","pinyin":"wulanchabu","id":150900,"citysite":0},{"name":"乌海","pinyin":"wuhai","id":150300,"citysite":0},{"name":"兴安盟","pinyin":"xinganmeng","id":152200,"citysite":0},{"name":"锡林郭勒盟","pinyin":"xilinguolemeng","id":152500,"citysite":0},{"name":"宁夏","pinyin":"ningxia","id":640000},{"name":"银川","pinyin":"yinchuan","id":640100,"citysite":1},{"name":"固原","pinyin":"guyuan","id":640400,"citysite":0},{"name":"石嘴山","pinyin":"shizuishan","id":640200,"citysite":0},{"name":"吴忠","pinyin":"wuzhong","id":640300,"citysite":0},{"name":"中卫","pinyin":"zhongwei","id":640500,"citysite":0},{"name":"青海","pinyin":"qinghai","id":630000},{"name":"西宁","pinyin":"xining","id":630100,"citysite":1},{"name":"果洛","pinyin":"guoluo","id":632600,"citysite":0},{"name":"海西","pinyin":"haixi","id":632800,"citysite":0},{"name":"海东","pinyin":"haidong","id":630200,"citysite":0},{"name":"海北","pinyin":"haibei","id":632200,"citysite":0},{"name":"黄南","pinyin":"huangnan","id":632300,"citysite":0},{"name":"海南","pinyin":"hai_nan","id":632500,"citysite":0},{"name":"玉树","pinyin":"yushu","id":632700,"citysite":0},{"name":"陕西","pinyin":"shan_xi","id":610000},{"name":"西安","pinyin":"xian","id":610100,"citysite":1},{"name":"榆林","pinyin":"yulin","id":610800,"citysite":1},{"name":"安康","pinyin":"ankang","id":610900,"citysite":0},{"name":"宝鸡","pinyin":"baoji","id":610300,"citysite":0},{"name":"汉中","pinyin":"hanzhong","id":610700,"citysite":0},{"name":"商洛","pinyin":"shangluo","id":611000,"citysite":0},{"name":"铜川","pinyin":"tongchuan","id":610200,"citysite":0},{"name":"渭南","pinyin":"weinan","id":610500,"citysite":0},{"name":"咸阳","pinyin":"xianyang","id":610400,"citysite":0},{"name":"西咸新区","pinyin":"xixianxinqu","id":611100,"citysite":0},{"name":"延安","pinyin":"yanan","id":610600,"citysite":0},{"name":"四川","pinyin":"sichuan","id":510000},{"name":"成都","pinyin":"chengdu","id":510100,"citysite":1},{"name":"德阳","pinyin":"deyang","id":510600,"citysite":1},{"name":"绵阳","pinyin":"mianyang","id":510700,"citysite":1},{"name":"南充","pinyin":"nanchong","id":511300,"citysite":1},{"name":"阿坝","pinyin":"aba","id":513200,"citysite":0},{"name":"巴中","pinyin":"bazhong","id":511900,"citysite":0},{"name":"达州","pinyin":"dazhou","id":511700,"citysite":0},{"name":"广元","pinyin":"guangyuan","id":510800,"citysite":0},{"name":"广安","pinyin":"guangan","id":511600,"citysite":0},{"name":"甘孜","pinyin":"ganzi","id":513300,"citysite":0},{"name":"凉山","pinyin":"liangshan","id":513400,"citysite":0},{"name":"乐山","pinyin":"leshan","id":511100,"citysite":0},{"name":"泸州","pinyin":"luzhou","id":510500,"citysite":0},{"name":"眉山","pinyin":"meishan","id":511400,"citysite":0},{"name":"内江","pinyin":"neijiang","id":511000,"citysite":0},{"name":"攀枝花","pinyin":"panzhihua","id":510400,"citysite":0},{"name":"遂宁","pinyin":"suining","id":510900,"citysite":0},{"name":"宜宾","pinyin":"yibin","id":511500,"citysite":0},{"name":"雅安","pinyin":"yaan","id":511800,"citysite":0},{"name":"资阳","pinyin":"ziyang","id":512000,"citysite":0},{"name":"自贡","pinyin":"zigong","id":510300,"citysite":0},{"name":"上海","pinyin":"shanghai","id":310000},{"name":"山西","pinyin":"shanxi","id":140000},{"name":"太原","pinyin":"taiyuan","id":140100,"citysite":1},{"name":"大同","pinyin":"datong","id":140200,"citysite":1},{"name":"长治","pinyin":"zhangzhi","id":140400,"citysite":1},{"name":"晋城","pinyin":"jincheng","id":140500,"citysite":1},{"name":"晋中","pinyin":"jinzhong","id":140700,"citysite":1},{"name":"运城","pinyin":"yuncheng","id":140800,"citysite":1},{"name":"临汾","pinyin":"linfen","id":141000,"citysite":1},{"name":"吕梁","pinyin":"lvliang","id":141100,"citysite":0},{"name":"朔州","pinyin":"shuozhou","id":140600,"citysite":0},{"name":"忻州","pinyin":"xinzhou","id":140900,"citysite":0},{"name":"阳泉","pinyin":"yangquan","id":140300,"citysite":0},{"name":"山东","pinyin":"shandong","id":370000},{"name":"济南","pinyin":"jinan","id":370100,"citysite":1},{"name":"青岛","pinyin":"qingdao","id":370200,"citysite":1},{"name":"淄博","pinyin":"zibo","id":370300,"citysite":1},{"name":"枣庄","pinyin":"zaozhuang","id":370400,"citysite":1},{"name":"东营","pinyin":"dongying","id":370500,"citysite":1},{"name":"烟台","pinyin":"yantai","id":370600,"citysite":1},{"name":"潍坊","pinyin":"weifang","id":370700,"citysite":1},{"name":"济宁","pinyin":"jining","id":370800,"citysite":1},{"name":"泰安","pinyin":"taian","id":370900,"citysite":1},{"name":"威海","pinyin":"weihai","id":371000,"citysite":1},{"name":"日照","pinyin":"rizhao","id":371100,"citysite":1},{"name":"莱芜","pinyin":"laiwu","id":371200,"citysite":1},{"name":"临沂","pinyin":"linyi","id":371300,"citysite":1},{"name":"德州","pinyin":"dezhou","id":371400,"citysite":1},{"name":"聊城","pinyin":"liaocheng","id":371500,"citysite":1},{"name":"滨州","pinyin":"binzhou","id":371600,"citysite":1},{"name":"菏泽","pinyin":"heze","id":371700,"citysite":1},{"name":"天津","pinyin":"tianjin","id":120000},{"name":"新疆","pinyin":"xinjiang","id":650000},{"name":"乌鲁木齐","pinyin":"wulumuqi","id":650100,"citysite":1},{"name":"阿克苏","pinyin":"akesu","id":652900,"citysite":0},{"name":"阿勒泰","pinyin":"aletai","id":654300,"citysite":0},{"name":"阿拉尔","pinyin":"aral","id":659002,"citysite":0},{"name":"北屯","pinyin":"beitun","id":659005,"citysite":0},{"name":"博尔塔拉","pinyin":"boertala","id":652700,"citysite":0},{"name":"巴音郭楞","pinyin":"bayinguoleng","id":652800,"citysite":0},{"name":"昌吉","pinyin":"changji","id":652300,"citysite":0},{"name":"哈密","pinyin":"hami","id":650500,"citysite":0},{"name":"和田","pinyin":"hetian","id":653200,"citysite":0},{"name":"克拉玛依","pinyin":"kelamayi","id":650200,"citysite":0},{"name":"克孜勒苏","pinyin":"kezilesu","id":653000,"citysite":0},{"name":"喀什","pinyin":"kashen","id":653100,"citysite":0},{"name":"可克达拉","pinyin":"kokdala","id":659008,"citysite":0},{"name":"昆玉","pinyin":"kunyu","id":659009,"citysite":0},{"name":"双河","pinyin":"shuanghe","id":659007,"citysite":0},{"name":"石河子","pinyin":"shihezi","id":659001,"citysite":0},{"name":"铁门关","pinyin":"tiemenguan","id":659006,"citysite":0},{"name":"图木舒克","pinyin":"tumxuk","id":659003,"citysite":0},{"name":"吐鲁番","pinyin":"turpan","id":650400,"citysite":0},{"name":"塔城","pinyin":"tacheng","id":654200,"citysite":0},{"name":"五家渠","pinyin":"wujiaqu","id":659004,"citysite":0},{"name":"伊犁","pinyin":"yili","id":654000,"citysite":0},{"name":"西藏","pinyin":"xizang","id":540000},{"name":"阿里","pinyin":"ali","id":542500,"citysite":0},{"name":"昌都","pinyin":"qamdo","id":540300,"citysite":0},{"name":"林芝","pinyin":"nyingchi","id":540400,"citysite":0},{"name":"拉萨","pinyin":"lasa","id":540100,"citysite":0},{"name":"那曲","pinyin":"naqu","id":542400,"citysite":0},{"name":"日喀则","pinyin":"rikaze","id":540200,"citysite":0},{"name":"山南","pinyin":"shannan","id":540500,"citysite":0},{"name":"云南","pinyin":"yunnan","id":530000},{"name":"昆明","pinyin":"kunming","id":530100,"citysite":1},{"name":"曲靖","pinyin":"qujing","id":530300,"citysite":1},{"name":"保山","pinyin":"baoshan","id":530500,"citysite":0},{"name":"楚雄","pinyin":"chuxiong","id":532300,"citysite":0},{"name":"大理","pinyin":"dali","id":532900,"citysite":0},{"name":"德宏","pinyin":"dehong","id":533100,"citysite":0},{"name":"迪庆","pinyin":"diqing","id":533400,"citysite":0},{"name":"红河","pinyin":"honghe","id":532500,"citysite":0},{"name":"丽江","pinyin":"lijiang","id":530700,"citysite":0},{"name":"临沧","pinyin":"lincang","id":530900,"citysite":0},{"name":"怒江","pinyin":"nujiang","id":533300,"citysite":0},{"name":"普洱","pinyin":"puer","id":530800,"citysite":0},{"name":"文山","pinyin":"wenshan","id":532600,"citysite":0},{"name":"西双版纳","pinyin":"xishuangbanna","id":532800,"citysite":0},{"name":"玉溪","pinyin":"yuxi","id":530400,"citysite":0},{"name":"昭通","pinyin":"zhaotong","id":530600,"citysite":0},{"name":"浙江","pinyin":"zhejiang","id":330000},{"name":"杭州","pinyin":"hangzhou","id":330100,"citysite":1},{"name":"宁波","pinyin":"ningbo","id":330200,"citysite":1},{"name":"温州","pinyin":"wenzhou","id":330300,"citysite":1},{"name":"嘉兴","pinyin":"jiaxing","id":330400,"citysite":1},{"name":"湖州","pinyin":"huzhou","id":330500,"citysite":1},{"name":"绍兴","pinyin":"shaoxing","id":330600,"citysite":1},{"name":"金华","pinyin":"jinhua","id":330700,"citysite":1},{"name":"衢州","pinyin":"quzhou","id":330800,"citysite":1},{"name":"台州","pinyin":"taizhou","id":331000,"citysite":1},{"name":"丽水","pinyin":"lishui","id":331100,"citysite":0},{"name":"舟山","pinyin":"zhoushan","id":330900,"citysite":0},{"name":"舟山群岛新区","pinyin":"zhoushanxinqu","id":331200,"citysite":0}]
	`

	//全国的省
	provinceArray = `
				[{"name":"安徽","pinyin":"anhui","id":340000},{"name":"北京","pinyin":"beijing","id":110000},{"name":"重庆","pinyin":"chongqing","id":500000},{"name":"福建","pinyin":"fujian","id":350000},{"name":"广东","pinyin":"guangdong","id":440000},{"name":"广西","pinyin":"guangxi","id":450000},{"name":"贵州","pinyin":"guizhou","id":520000},{"name":"甘肃","pinyin":"gansu","id":620000},{"name":"海南","pinyin":"hainan","id":460000},{"name":"河南","pinyin":"henan","id":410000},{"name":"湖北","pinyin":"hubei","id":420000},{"name":"湖南","pinyin":"hunan","id":430000},{"name":"河北","pinyin":"hebei","id":130000},{"name":"黑龙江","pinyin":"heilongjiang","id":230000},{"name":"江苏","pinyin":"jiangsu","id":320000},{"name":"江西","pinyin":"jiangxi","id":360000},{"name":"吉林","pinyin":"jilin","id":220000},{"name":"辽宁","pinyin":"liaoning","id":210000},{"name":"内蒙古","pinyin":"namenggu","id":150000},{"name":"宁夏","pinyin":"ningxia","id":640000},{"name":"青海","pinyin":"qinghai","id":630000},{"name":"陕西","pinyin":"shan_xi","id":610000},{"name":"四川","pinyin":"sichuan","id":510000},{"name":"上海","pinyin":"shanghai","id":310000},{"name":"山西","pinyin":"shanxi","id":140000},{"name":"山东","pinyin":"shandong","id":370000},{"name":"天津","pinyin":"tianjin","id":120000},{"name":"新疆","pinyin":"xinjiang","id":650000},{"name":"西藏","pinyin":"xizang","id":540000},{"name":"云南","pinyin":"yunnan","id":530000},{"name":"浙江","pinyin":"zhejiang","id":330000}]
	
	`

	// //云南省
	//provinceArray = `
	//			[{"name":"云南","pinyin":"yunnan","id":530000}]
	//
	//`

	KilometerReg       = regexp.MustCompile(`\d+\.\d+|\d+`)
	VehicleTypeYearReg = regexp.MustCompile(`^\d+`)
)

type QcArea struct {
	Name string `json:"name"`
	City []QcCity
}

type QcCity struct {
	Name   string `json:"name"`
	Pinyin string `json:"pinyin"`
}

type QcCar struct {
	ID        primitive.ObjectID `json:"id" bson:"_id"`
	CityName  string             `bson:"city_name" json:"city_name"`
	Title     string             `bson:"title" json:"title"`
	Price     float64            `bson:"price" json:"price"`
	Kilometer float64            `bson:"kilometer" json:"kilometer"`
	Year      int                `bson:"year" json:"year"`

	VehicleType     string `bson:"vehicle_type" json:"vehicle_type"`
	VehicleTypeYear int    `bson:"vehicle_type_year" json:"vehicle_type_year"`
	ModelConfig     string `bson:"model_config" json:"model_config"`
}

// areaJson 结构的城市
func GetCitys() []QcCity {
	var areas []QcArea
	var citys []QcCity

	json.Unmarshal([]byte(areaJson), &areas)

	for _, area := range areas {
		for _, city := range area.City {
			citys = append(citys, city)
		}
	}

	return citys
}

// areaJson 结构的城市
func GetNewCitys() []QcCity {
	var citys []QcCity
	json.Unmarshal([]byte(provinceArray), &citys)
	return citys
}

func GetCityName(doc *goquery.Document) string {
	return doc.Find(".citycont .fn-left").Text()
}

func GetNextPageUrl(doc *goquery.Document) (val string, exists bool) {
	return doc.Find(".page .page-item-next").Attr("href")
}

func GetCurrentPage(doc *goquery.Document) (page int) {
	pageS := doc.Find(".page .current").Text()

	if pageS != "" {
		var err error
		page, err = strconv.Atoi(pageS)
		if err != nil {
			log.Printf("spiders.GetCurrentPage err: %v", err)
		}
	}

	return page
}

func GetCars(doc *goquery.Document) (cars []*QcCar) {
	cityName := GetCityName(doc)
	doc.Find(".piclist ul li:not(.line)").Each(func(i int, selection *goquery.Selection) {
		title := selection.Find(".title a").Text()
		price := selection.Find(".detail .detail-r").Find(".colf8").Text()
		kilometerHtml, _ := selection.Find(".detail .detail-l").Find("p").Eq(0).Html()
		year := selection.Find(".detail .detail-l").Find("p").Eq(1).Text()

		kilometer := ""
		if KilometerReg != nil {
			kilometerList := KilometerReg.FindAllString(kilometerHtml, 1)
			if len(kilometerList) != 0 {
				kilometer = kilometerList[0]
			}
		}

		year = strings.Join(compileNumber.FindAllString(strings.TrimSpace(year), -1), "")
		priceS, _ := strconv.ParseFloat(price, 64)
		kilometerS, _ := strconv.ParseFloat(kilometer, 64)
		yearS, _ := strconv.Atoi(year)

		qcCar := &QcCar{
			CityName:  cityName,
			Title:     title,
			Price:     priceS,
			Kilometer: kilometerS,
			Year:      yearS,
		}
		titleList := strings.Split(title, " ")
		titleLen := len(titleList)
		if titleLen > 0 {
			qcCar.VehicleType = titleList[0]
			qcCar.ModelConfig = titleList[titleLen-1]
		}
		if titleLen > 1 {
			VehicleTypeYearString := titleList[1]
			VehicleTypeYear := VehicleTypeYearReg.FindString(VehicleTypeYearString)
			if len(VehicleTypeYear) != 0 {
				VehicleTypeYearInt, _ := strconv.Atoi(VehicleTypeYear)
				qcCar.VehicleTypeYear = VehicleTypeYearInt
			}
		}

		//todo 解析title为其他属性
		cars = append(cars, qcCar)
	})

	return cars
}
